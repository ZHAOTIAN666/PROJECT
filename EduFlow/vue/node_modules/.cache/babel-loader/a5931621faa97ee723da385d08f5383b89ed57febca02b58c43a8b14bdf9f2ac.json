{"ast":null,"code":"export default {\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0\n    };\n  },\n  mounted() {\n    this.load(1);\n  },\n  methods: {\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum;\n      this.$request.get('/eqreserve/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          userId: this.user.id\n        }\n      }).then(res => {\n        this.tableData = res.data?.list;\n        this.total = res.data?.total;\n      });\n    },\n    del(id) {\n      this.$confirm('Are you sure you want to cancel this reservation?', 'Confirm Cancellation', {\n        type: \"warning\",\n        confirmButtonText: 'Yes, Cancel',\n        cancelButtonText: 'No, Keep'\n      }).then(response => {\n        this.$request.delete('/eqreserve/delete/' + id).then(res => {\n          if (res.code === '200') {\n            this.$message.success('Reservation cancelled successfully');\n            this.load(1);\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(() => {});\n    },\n    handleCurrentChange(pageNum) {\n      this.load(pageNum);\n    },\n    // 获取状态对应的标签类型\n    getStatusType(status) {\n      const statusMap = {\n        '待审核': 'warning',\n        '已通过': 'success',\n        '已拒绝': 'danger',\n        '已完成': 'info'\n      };\n      return statusMap[status] || 'info';\n    },\n    // 获取状态的英文文本\n    getStatusText(status) {\n      const statusMap = {\n        '待审核': 'Pending',\n        '已通过': 'Approved',\n        '已拒绝': 'Rejected',\n        '已完成': 'Completed'\n      };\n      return statusMap[status] || status;\n    }\n  }\n};","map":{"version":3,"names":["data","user","JSON","parse","localStorage","getItem","tableData","pageNum","pageSize","total","mounted","load","methods","$request","get","params","userId","id","then","res","list","del","$confirm","type","confirmButtonText","cancelButtonText","response","delete","code","$message","success","error","msg","catch","handleCurrentChange","getStatusType","status","statusMap","getStatusText"],"sources":["src/views/front/EqReserve.vue"],"sourcesContent":["<template>\n  <div class=\"main-content\">\n    <div class=\"container\">\n      <!-- 页面标题 -->\n      <div class=\"page-header\">\n        <h2 class=\"page-title\">My Equipment Reservations</h2>\n        <div class=\"total-count\">Total: {{total}} records</div>\n      </div>\n\n      <!-- 表格容器 -->\n      <div class=\"table-container\">\n        <el-table :data=\"tableData\" stripe class=\"custom-table\" empty-text=\"No reservation records found\">\n          <el-table-column prop=\"id\" label=\"ID\" width=\"80\" align=\"center\" sortable>\n            <template v-slot=\"scope\">\n              <span class=\"id-badge\">#{{scope.row.id}}</span>\n            </template>\n          </el-table-column>\n\n          <el-table-column prop=\"equipmentImg\" label=\"Equipment Image\" width=\"120\" align=\"center\">\n            <template v-slot=\"scope\">\n              <div class=\"image-container\">\n                <el-image\n                    class=\"equipment-image\"\n                    v-if=\"scope.row.equipmentImg\"\n                    :src=\"scope.row.equipmentImg\"\n                    :preview-src-list=\"[scope.row.equipmentImg]\"\n                    fit=\"cover\">\n                  <div slot=\"error\" class=\"image-slot\">\n                    <i class=\"el-icon-picture-outline\"></i>\n                  </div>\n                </el-image>\n                <div v-else class=\"no-image\">\n                  <i class=\"el-icon-picture-outline\"></i>\n                </div>\n              </div>\n            </template>\n          </el-table-column>\n\n          <el-table-column prop=\"equipmentName\" label=\"Equipment Name\" show-overflow-tooltip min-width=\"150\">\n            <template v-slot=\"scope\">\n              <span class=\"equipment-name\">{{scope.row.equipmentName}}</span>\n            </template>\n          </el-table-column>\n\n          <el-table-column prop=\"start\" label=\"Start Time\" show-overflow-tooltip min-width=\"130\">\n            <template v-slot=\"scope\">\n              <div class=\"time-info\">\n                <i class=\"el-icon-time\"></i>\n                <span>{{scope.row.start}}</span>\n              </div>\n            </template>\n          </el-table-column>\n\n          <el-table-column prop=\"end\" label=\"End Time\" show-overflow-tooltip min-width=\"130\">\n            <template v-slot=\"scope\">\n              <div class=\"time-info\">\n                <i class=\"el-icon-time\"></i>\n                <span>{{scope.row.end}}</span>\n              </div>\n            </template>\n          </el-table-column>\n\n          <el-table-column prop=\"status\" label=\"Status\" width=\"120\" align=\"center\">\n            <template v-slot=\"scope\">\n              <el-tag\n                  :type=\"getStatusType(scope.row.status)\"\n                  size=\"small\"\n                  class=\"status-tag\">\n                {{getStatusText(scope.row.status)}}\n              </el-tag>\n            </template>\n          </el-table-column>\n\n          <el-table-column label=\"Actions\" width=\"150\" align=\"center\" v-if=\"user.role === 'USER'\">\n            <template v-slot=\"scope\">\n              <el-button\n                  type=\"danger\"\n                  size=\"mini\"\n                  icon=\"el-icon-delete\"\n                  @click=\"del(scope.row.id)\"\n                  :disabled=\"scope.row.status !== '待审核'\"\n                  class=\"action-btn\">\n                Cancel\n              </el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <!-- 分页组件 -->\n        <div class=\"pagination-container\">\n          <el-pagination\n              background\n              @current-change=\"handleCurrentChange\"\n              :current-page=\"pageNum\"\n              :page-sizes=\"[5, 10, 20]\"\n              :page-size=\"pageSize\"\n              layout=\"total, prev, pager, next\"\n              :total=\"total\"\n              class=\"custom-pagination\">\n          </el-pagination>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n    }\n  },\n  mounted() {\n    this.load(1)\n  },\n  methods: {\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum\n      this.$request.get('/eqreserve/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          userId: this.user.id\n        }\n      }).then(res => {\n        this.tableData = res.data?.list\n        this.total = res.data?.total\n      })\n    },\n\n    del(id) {\n      this.$confirm('Are you sure you want to cancel this reservation?', 'Confirm Cancellation', {\n        type: \"warning\",\n        confirmButtonText: 'Yes, Cancel',\n        cancelButtonText: 'No, Keep'\n      }).then(response => {\n        this.$request.delete('/eqreserve/delete/' + id).then(res => {\n          if (res.code === '200') {\n            this.$message.success('Reservation cancelled successfully')\n            this.load(1)\n          } else {\n            this.$message.error(res.msg)\n          }\n        })\n      }).catch(() => {})\n    },\n\n    handleCurrentChange(pageNum) {\n      this.load(pageNum)\n    },\n\n    // 获取状态对应的标签类型\n    getStatusType(status) {\n      const statusMap = {\n        '待审核': 'warning',\n        '已通过': 'success',\n        '已拒绝': 'danger',\n        '已完成': 'info'\n      }\n      return statusMap[status] || 'info'\n    },\n\n    // 获取状态的英文文本\n    getStatusText(status) {\n      const statusMap = {\n        '待审核': 'Pending',\n        '已通过': 'Approved',\n        '已拒绝': 'Rejected',\n        '已完成': 'Completed'\n      }\n      return statusMap[status] || status\n    }\n  }\n}\n</script>\n\n<style scoped>\n.main-content {\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n  min-height: 100vh;\n  padding: 20px 0;\n}\n\n.container {\n  width: 90%;\n  max-width: 1200px;\n  margin: 0 auto;\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.page-header {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 30px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.page-title {\n  margin: 0;\n  font-size: 28px;\n  font-weight: 600;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n}\n\n.total-count {\n  background: rgba(255, 255, 255, 0.2);\n  padding: 8px 16px;\n  border-radius: 20px;\n  font-size: 14px;\n  backdrop-filter: blur(10px);\n}\n\n.table-container {\n  padding: 30px;\n}\n\n.custom-table {\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\n.custom-table ::v-deep .el-table__header {\n  background: #f8f9fc;\n}\n\n.custom-table ::v-deep .el-table__header th {\n  background: #f8f9fc !important;\n  color: #2d3748;\n  font-weight: 600;\n  border-bottom: 2px solid #e2e8f0;\n  padding: 16px 12px;\n}\n\n.custom-table ::v-deep .el-table__row:hover {\n  background: #f7fafc !important;\n}\n\n.custom-table ::v-deep .el-table__row td {\n  padding: 16px 12px;\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.id-badge {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.image-container {\n  display: flex;\n  justify-content: center;\n}\n\n.equipment-image {\n  width: 50px;\n  height: 50px;\n  border-radius: 8px;\n  border: 2px solid #e2e8f0;\n  transition: all 0.3s ease;\n}\n\n.equipment-image:hover {\n  transform: scale(1.1);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n.no-image {\n  width: 50px;\n  height: 50px;\n  background: #f7fafc;\n  border: 2px dashed #cbd5e0;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #a0aec0;\n}\n\n.image-slot {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  background: #f5f5f5;\n  color: #909399;\n}\n\n.equipment-name {\n  font-weight: 500;\n  color: #2d3748;\n}\n\n.time-info {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  color: #4a5568;\n}\n\n.time-info i {\n  color: #667eea;\n}\n\n.status-tag {\n  font-weight: 500;\n  border: none;\n  padding: 6px 12px;\n}\n\n.action-btn {\n  transition: all 0.3s ease;\n}\n\n.action-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(245, 101, 101, 0.3);\n}\n\n.pagination-container {\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n  padding-top: 20px;\n  border-top: 1px solid #e2e8f0;\n}\n\n.custom-pagination ::v-deep .el-pagination {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.custom-pagination ::v-deep .el-pager li {\n  border-radius: 6px;\n  margin: 0 2px;\n  transition: all 0.3s ease;\n}\n\n.custom-pagination ::v-deep .el-pager li.active {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n}\n\n.custom-pagination ::v-deep .btn-prev,\n.custom-pagination ::v-deep .btn-next {\n  border-radius: 6px;\n  transition: all 0.3s ease;\n}\n\n.custom-pagination ::v-deep .btn-prev:hover,\n.custom-pagination ::v-deep .btn-next:hover {\n  background: #667eea;\n  color: white;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .container {\n    width: 95%;\n    margin: 10px auto;\n  }\n\n  .page-header {\n    padding: 20px;\n    flex-direction: column;\n    gap: 10px;\n    text-align: center;\n  }\n\n  .page-title {\n    font-size: 24px;\n  }\n\n  .table-container {\n    padding: 20px;\n  }\n\n\n  }\n}\n</style>"],"mappings":"AA2GA;EACAA,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,KAAAJ,OAAA;MACA,IAAAA,OAAA,OAAAA,OAAA,GAAAA,OAAA;MACA,KAAAM,QAAA,CAAAC,GAAA;QACAC,MAAA;UACAR,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAQ,MAAA,OAAAf,IAAA,CAAAgB;QACA;MACA,GAAAC,IAAA,CAAAC,GAAA;QACA,KAAAb,SAAA,GAAAa,GAAA,CAAAnB,IAAA,EAAAoB,IAAA;QACA,KAAAX,KAAA,GAAAU,GAAA,CAAAnB,IAAA,EAAAS,KAAA;MACA;IACA;IAEAY,IAAAJ,EAAA;MACA,KAAAK,QAAA;QACAC,IAAA;QACAC,iBAAA;QACAC,gBAAA;MACA,GAAAP,IAAA,CAAAQ,QAAA;QACA,KAAAb,QAAA,CAAAc,MAAA,wBAAAV,EAAA,EAAAC,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAS,IAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAnB,IAAA;UACA;YACA,KAAAkB,QAAA,CAAAE,KAAA,CAAAZ,GAAA,CAAAa,GAAA;UACA;QACA;MACA,GAAAC,KAAA;IACA;IAEAC,oBAAA3B,OAAA;MACA,KAAAI,IAAA,CAAAJ,OAAA;IACA;IAEA;IACA4B,cAAAC,MAAA;MACA,MAAAC,SAAA;QACA;QACA;QACA;QACA;MACA;MACA,OAAAA,SAAA,CAAAD,MAAA;IACA;IAEA;IACAE,cAAAF,MAAA;MACA,MAAAC,SAAA;QACA;QACA;QACA;QACA;MACA;MACA,OAAAA,SAAA,CAAAD,MAAA,KAAAA,MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}