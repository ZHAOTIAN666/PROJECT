{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nexport default {\n  name: \"Reserve\",\n  data() {\n    return {\n      tableData: [],\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      loading: false,\n      coachName: null,\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      rules: {}\n    };\n  },\n  computed: {\n    uniqueCustomers() {\n      const customers = new Set(this.tableData.map(item => item.userName));\n      return customers.size;\n    },\n    uniqueCoaches() {\n      const coaches = new Set(this.tableData.map(item => item.coachName));\n      return coaches.size;\n    }\n  },\n  created() {\n    this.load(1);\n  },\n  methods: {\n    // Load data with pagination\n    load(pageNum) {\n      if (pageNum) this.pageNum = pageNum;\n      this.loading = true;\n      this.$request.get('/reserve/selectPage', {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          coachName: this.coachName\n        }\n      }).then(res => {\n        this.tableData = res.data?.list || [];\n        this.total = res.data?.total || 0;\n        if (this.tableData.length === 0 && this.coachName) {\n          this.$message.info('No reservations found for this coach');\n        }\n      }).catch(err => {\n        this.$message.error('Failed to load reservations');\n        console.error('Load reservations error:', err);\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    // Reset search\n    reset() {\n      this.coachName = null;\n      this.load(1);\n      this.$message.success('Search has been reset');\n    },\n    // Handle page change\n    handleCurrentChange(pageNum) {\n      this.load(pageNum);\n    },\n    // Handle page size change\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load(1);\n    }\n  }\n};","map":{"version":3,"names":["name","data","tableData","pageNum","pageSize","total","loading","coachName","user","JSON","parse","localStorage","getItem","rules","computed","uniqueCustomers","customers","Set","map","item","userName","size","uniqueCoaches","coaches","created","load","methods","$request","get","params","then","res","list","length","$message","info","catch","err","error","console","finally","reset","success","handleCurrentChange","handleSizeChange"],"sources":["src/views/manager/Reserve.vue"],"sourcesContent":["<template>\r\n  <div class=\"reserve-container\">\r\n    <!-- Search Section -->\r\n    <div class=\"search-section\">\r\n      <div class=\"search-header\">\r\n        <i class=\"el-icon-search\"></i>\r\n        <span class=\"header-title\">Search Reservations</span>\r\n      </div>\r\n      <div class=\"search-content\">\r\n        <el-input\r\n            placeholder=\"Enter coach name\"\r\n            style=\"width: 250px\"\r\n            v-model=\"coachName\"\r\n            prefix-icon=\"el-icon-user\"\r\n            clearable>\r\n        </el-input>\r\n        <el-button\r\n            type=\"primary\"\r\n            plain\r\n            style=\"margin-left: 15px\"\r\n            @click=\"load(1)\"\r\n            icon=\"el-icon-search\">\r\n          Search\r\n        </el-button>\r\n        <el-button\r\n            type=\"warning\"\r\n            plain\r\n            style=\"margin-left: 10px\"\r\n            @click=\"reset\"\r\n            icon=\"el-icon-refresh\">\r\n          Reset\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Table Section -->\r\n    <div class=\"table-section\">\r\n      <div class=\"table-header\">\r\n        <i class=\"el-icon-tickets\"></i>\r\n        <span class=\"header-title\">Reservation List</span>\r\n        <el-tag\r\n            size=\"small\"\r\n            type=\"info\"\r\n            style=\"margin-left: 15px\">\r\n          Total: {{ total }} records\r\n        </el-tag>\r\n      </div>\r\n\r\n      <el-table\r\n          :data=\"tableData\"\r\n          stripe\r\n          border\r\n          v-loading=\"loading\"\r\n          element-loading-text=\"Loading reservations...\"\r\n          element-loading-spinner=\"el-icon-loading\"\r\n          empty-text=\"No reservations found\"\r\n          class=\"reservation-table\">\r\n\r\n        <el-table-column\r\n            prop=\"id\"\r\n            label=\"ID\"\r\n            width=\"80\"\r\n            align=\"center\"\r\n            sortable>\r\n          <template v-slot=\"scope\">\r\n            <el-tag size=\"mini\" type=\"primary\">\r\n              {{ scope.row.id }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n            prop=\"userName\"\r\n            label=\"Customer\"\r\n            show-overflow-tooltip\r\n            min-width=\"120\">\r\n          <template v-slot=\"scope\">\r\n            <div class=\"customer-info\">\r\n              <i class=\"el-icon-user-solid\"></i>\r\n              <span>{{ scope.row.userName }}</span>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n            prop=\"coachName\"\r\n            label=\"Coach\"\r\n            show-overflow-tooltip\r\n            min-width=\"120\">\r\n          <template v-slot=\"scope\">\r\n            <div class=\"coach-info\">\r\n              <i class=\"el-icon-s-custom\"></i>\r\n              <span>{{ scope.row.coachName }}</span>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n            prop=\"content\"\r\n            label=\"Description\"\r\n            show-overflow-tooltip\r\n            min-width=\"200\">\r\n          <template v-slot=\"scope\">\r\n            <div class=\"description-text\">\r\n              {{ scope.row.content || 'No description' }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n            prop=\"time\"\r\n            label=\"Created Time\"\r\n            width=\"180\"\r\n            sortable>\r\n          <template v-slot=\"scope\">\r\n            <div class=\"time-info\">\r\n              <i class=\"el-icon-time\"></i>\r\n              <span>{{ scope.row.time }}</span>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- Pagination -->\r\n      <div class=\"pagination-section\">\r\n        <el-pagination\r\n            background\r\n            @current-change=\"handleCurrentChange\"\r\n            @size-change=\"handleSizeChange\"\r\n            :current-page=\"pageNum\"\r\n            :page-sizes=\"[5, 10, 20, 50]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Statistics Card -->\r\n    <div class=\"stats-section\" v-if=\"tableData.length > 0\">\r\n      <el-card class=\"stats-card\" shadow=\"hover\">\r\n        <div class=\"stats-content\">\r\n          <div class=\"stat-item\">\r\n            <i class=\"el-icon-tickets\"></i>\r\n            <div class=\"stat-info\">\r\n              <div class=\"stat-number\">{{ total }}</div>\r\n              <div class=\"stat-label\">Total Reservations</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <i class=\"el-icon-user\"></i>\r\n            <div class=\"stat-info\">\r\n              <div class=\"stat-number\">{{ uniqueCustomers }}</div>\r\n              <div class=\"stat-label\">Unique Customers</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <i class=\"el-icon-s-custom\"></i>\r\n            <div class=\"stat-info\">\r\n              <div class=\"stat-number\">{{ uniqueCoaches }}</div>\r\n              <div class=\"stat-label\">Active Coaches</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Reserve\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      loading: false,\r\n      coachName: null,\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      rules: {}\r\n    }\r\n  },\r\n  computed: {\r\n    uniqueCustomers() {\r\n      const customers = new Set(this.tableData.map(item => item.userName))\r\n      return customers.size\r\n    },\r\n    uniqueCoaches() {\r\n      const coaches = new Set(this.tableData.map(item => item.coachName))\r\n      return coaches.size\r\n    }\r\n  },\r\n  created() {\r\n    this.load(1)\r\n  },\r\n  methods: {\r\n    // Load data with pagination\r\n    load(pageNum) {\r\n      if (pageNum) this.pageNum = pageNum\r\n      this.loading = true\r\n\r\n      this.$request.get('/reserve/selectPage', {\r\n        params: {\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          coachName: this.coachName,\r\n        }\r\n      }).then(res => {\r\n        this.tableData = res.data?.list || []\r\n        this.total = res.data?.total || 0\r\n\r\n        if (this.tableData.length === 0 && this.coachName) {\r\n          this.$message.info('No reservations found for this coach')\r\n        }\r\n      }).catch(err => {\r\n        this.$message.error('Failed to load reservations')\r\n        console.error('Load reservations error:', err)\r\n      }).finally(() => {\r\n        this.loading = false\r\n      })\r\n    },\r\n\r\n    // Reset search\r\n    reset() {\r\n      this.coachName = null\r\n      this.load(1)\r\n      this.$message.success('Search has been reset')\r\n    },\r\n\r\n    // Handle page change\r\n    handleCurrentChange(pageNum) {\r\n      this.load(pageNum)\r\n    },\r\n\r\n    // Handle page size change\r\n    handleSizeChange(pageSize) {\r\n      this.pageSize = pageSize\r\n      this.load(1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.reserve-container {\r\n  padding: 20px;\r\n  background: #f0f2f5;\r\n  min-height: 100vh;\r\n}\r\n\r\n.search-section {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.search-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n.search-header i {\r\n  font-size: 18px;\r\n  color: #409eff;\r\n  margin-right: 8px;\r\n}\r\n\r\n.header-title {\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.search-content {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n}\r\n\r\n.table-section {\r\n  background: white;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.table-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 15px;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n.table-header i {\r\n  font-size: 18px;\r\n  color: #409eff;\r\n  margin-right: 8px;\r\n}\r\n\r\n.reservation-table {\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.customer-info,\r\n.coach-info,\r\n.time-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.customer-info i {\r\n  color: #67c23a;\r\n}\r\n\r\n.coach-info i {\r\n  color: #e6a23c;\r\n}\r\n\r\n.time-info i {\r\n  color: #909399;\r\n}\r\n\r\n.description-text {\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n\r\n.pagination-section {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.stats-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.stats-card {\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.stats-content {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  padding: 10px 0;\r\n}\r\n\r\n.stat-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  text-align: center;\r\n}\r\n\r\n.stat-item i {\r\n  font-size: 24px;\r\n  color: #409eff;\r\n}\r\n\r\n.stat-info {\r\n  text-align: left;\r\n}\r\n\r\n.stat-number {\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  line-height: 1;\r\n}\r\n\r\n.stat-label {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-top: 4px;\r\n}\r\n\r\n/* Table styling */\r\n/deep/ .el-table th {\r\n  background-color: #fafafa;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n/deep/ .el-table td {\r\n  padding: 12px 0;\r\n}\r\n\r\n/deep/ .el-table--striped .el-table__body tr.el-table__row--striped td {\r\n  background: #fafafa;\r\n}\r\n\r\n/* Button styling */\r\n/deep/ .el-button {\r\n  border-radius: 6px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n/deep/ .el-button:hover {\r\n  transform: translateY(-1px);\r\n}\r\n\r\n/* Input styling */\r\n/deep/ .el-input__inner {\r\n  border-radius: 6px;\r\n}\r\n\r\n/* Pagination styling */\r\n/deep/ .el-pagination {\r\n  margin-top: 20px;\r\n}\r\n\r\n/deep/ .el-pagination.is-background .el-pager li:not(.disabled):hover {\r\n  color: #409eff;\r\n}\r\n\r\n/* Responsive design */\r\n@media (max-width: 768px) {\r\n  .reserve-container {\r\n    padding: 15px;\r\n  }\r\n\r\n  .search-content {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n\r\n  .search-content .el-input {\r\n    width: 100% !important;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .stats-content {\r\n    flex-direction: column;\r\n    gap: 20px;\r\n  }\r\n\r\n  .pagination-section {\r\n    justify-content: center;\r\n  }\r\n\r\n  /deep/ .el-pagination {\r\n    flex-wrap: wrap;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .table-section {\r\n    padding: 15px;\r\n  }\r\n\r\n  /deep/ .el-table__body-wrapper {\r\n    overflow-x: auto;\r\n  }\r\n}\r\n</style>"],"mappings":";;;;;;;;;AA0KA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,OAAA;MACAC,QAAA;MACAC,KAAA;MACAC,OAAA;MACAC,SAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACAC,gBAAA;MACA,MAAAC,SAAA,OAAAC,GAAA,MAAAf,SAAA,CAAAgB,GAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAC,QAAA;MACA,OAAAJ,SAAA,CAAAK,IAAA;IACA;IACAC,cAAA;MACA,MAAAC,OAAA,OAAAN,GAAA,MAAAf,SAAA,CAAAgB,GAAA,CAAAC,IAAA,IAAAA,IAAA,CAAAZ,SAAA;MACA,OAAAgB,OAAA,CAAAF,IAAA;IACA;EACA;EACAG,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACA;IACAD,KAAAtB,OAAA;MACA,IAAAA,OAAA,OAAAA,OAAA,GAAAA,OAAA;MACA,KAAAG,OAAA;MAEA,KAAAqB,QAAA,CAAAC,GAAA;QACAC,MAAA;UACA1B,OAAA,OAAAA,OAAA;UACAC,QAAA,OAAAA,QAAA;UACAG,SAAA,OAAAA;QACA;MACA,GAAAuB,IAAA,CAAAC,GAAA;QACA,KAAA7B,SAAA,GAAA6B,GAAA,CAAA9B,IAAA,EAAA+B,IAAA;QACA,KAAA3B,KAAA,GAAA0B,GAAA,CAAA9B,IAAA,EAAAI,KAAA;QAEA,SAAAH,SAAA,CAAA+B,MAAA,eAAA1B,SAAA;UACA,KAAA2B,QAAA,CAAAC,IAAA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACA,KAAAH,QAAA,CAAAI,KAAA;QACAC,OAAA,CAAAD,KAAA,6BAAAD,GAAA;MACA,GAAAG,OAAA;QACA,KAAAlC,OAAA;MACA;IACA;IAEA;IACAmC,MAAA;MACA,KAAAlC,SAAA;MACA,KAAAkB,IAAA;MACA,KAAAS,QAAA,CAAAQ,OAAA;IACA;IAEA;IACAC,oBAAAxC,OAAA;MACA,KAAAsB,IAAA,CAAAtB,OAAA;IACA;IAEA;IACAyC,iBAAAxC,QAAA;MACA,KAAAA,QAAA,GAAAA,QAAA;MACA,KAAAqB,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}