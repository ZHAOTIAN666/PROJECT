{"ast":null,"code":"import E from 'wangeditor';\nexport default {\n  name: 'CourseDetail',\n  data() {\n    return {\n      user: {},\n      courseId: this.$route.query.id,\n      courseData: {}\n    };\n  },\n  mounted() {\n    this.initUser();\n    this.loadCourseDetail();\n  },\n  methods: {\n    // 安全地初始化用户数据\n    initUser() {\n      try {\n        const userStr = localStorage.getItem('xm-user');\n        this.user = userStr ? JSON.parse(userStr) : {};\n      } catch (error) {\n        console.error('Failed to parse user data:', error);\n        this.user = {};\n      }\n    },\n    // 加载课程详情\n    loadCourseDetail() {\n      if (!this.courseId) {\n        this.$message.error('Course ID is required');\n        return;\n      }\n      this.$request.get('/course/selectById/' + this.courseId).then(res => {\n        if (res.code === '200') {\n          this.courseData = res.data;\n        } else {\n          this.$message.error(res.msg || 'Failed to load course details');\n        }\n      }).catch(error => {\n        console.error('Failed to load course:', error);\n        this.$message.error('Failed to load course details');\n      });\n    },\n    // 购买课程\n    buy() {\n      // 检查用户是否已登录\n      if (!this.user.id) {\n        this.$message.warning('Please login first');\n        return;\n      }\n\n      // 验证课程数据\n      if (!this.courseData.price) {\n        this.$message.error('Course price not available');\n        return;\n      }\n      const data = {\n        courseId: this.courseId,\n        userId: this.user.id,\n        price: this.courseData.price\n      };\n      this.$request.post('/orders/add', data).then(res => {\n        if (res.code === '200') {\n          this.$message.success('Enrollment successful!');\n        } else {\n          this.$message.error(res.msg || 'Enrollment failed');\n        }\n      }).catch(error => {\n        console.error('Enrollment failed:', error);\n        this.$message.error('Enrollment failed, please try again');\n      });\n    }\n  }\n};","map":{"version":3,"names":["E","name","data","user","courseId","$route","query","id","courseData","mounted","initUser","loadCourseDetail","methods","userStr","localStorage","getItem","JSON","parse","error","console","$message","$request","get","then","res","code","msg","catch","buy","warning","price","userId","post","success"],"sources":["src/views/front/CourseDetail.vue"],"sourcesContent":["<template>\n  <div class=\"main-content\">\n    <div class=\"container\">\n      <!-- Course Header Section -->\n      <div class=\"course-header\">\n        <el-row :gutter=\"40\">\n          <el-col :span=\"8\">\n            <div class=\"image-container\">\n              <img :src=\"courseData.img\" alt=\"Course Image\" class=\"course-image\">\n              <div class=\"image-badge\">\n                <i class=\"el-icon-star-on\"></i>\n                <span>Featured Course</span>\n              </div>\n            </div>\n          </el-col>\n          <el-col :span=\"16\">\n            <div class=\"course-info\">\n              <h1 class=\"course-title\">{{ courseData.name }}</h1>\n\n              <div class=\"info-grid\">\n                <div class=\"info-item\">\n                  <div class=\"info-label\">\n                    <i class=\"el-icon-user-solid\"></i>\n                    <span>Teacher</span>\n                  </div>\n                  <div class=\"info-value\">{{ courseData.coachName }}</div>\n                </div>\n\n                <div class=\"info-item\">\n                  <div class=\"info-label\">\n                    <i class=\"el-icon-time\"></i>\n                    <span>Duration</span>\n                  </div>\n                  <div class=\"info-value\">{{ courseData.time }}</div>\n                </div>\n\n                <div class=\"info-item price-item\">\n                  <div class=\"info-label\">\n                    <i class=\"el-icon-money\"></i>\n                    <span>Price</span>\n                  </div>\n                  <div class=\"price-value\">RM {{ courseData.price }}</div>\n                </div>\n              </div>\n\n              <div class=\"action-section\">\n                <el-button\n                    type=\"primary\"\n                    size=\"large\"\n                    class=\"buy-button\"\n                    @click=\"buy\"\n                    icon=\"el-icon-shopping-cart-2\">\n                  Enroll Now\n                </el-button>\n                <div class=\"purchase-note\">\n                  <i class=\"el-icon-info\"></i>\n                  <span>Secure payment • Instant access</span>\n                </div>\n              </div>\n            </div>\n          </el-col>\n        </el-row>\n      </div>\n\n      <!-- Course Content Section -->\n      <div class=\"course-content-section\">\n        <div class=\"section-header\">\n          <h2>Course Description</h2>\n          <div class=\"header-line\"></div>\n        </div>\n        <div class=\"content-wrapper\">\n          <div\n              v-html=\"courseData.content\"\n              class=\"course-content w-e-text w-e-text-container\">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport E from 'wangeditor'\n\nexport default {\n  name: 'CourseDetail',\n  data() {\n    return {\n      user: {},\n      courseId: this.$route.query.id,\n      courseData: {}\n    }\n  },\n  mounted() {\n    this.initUser()\n    this.loadCourseDetail()\n  },\n  methods: {\n    // 安全地初始化用户数据\n    initUser() {\n      try {\n        const userStr = localStorage.getItem('xm-user')\n        this.user = userStr ? JSON.parse(userStr) : {}\n      } catch (error) {\n        console.error('Failed to parse user data:', error)\n        this.user = {}\n      }\n    },\n\n    // 加载课程详情\n    loadCourseDetail() {\n      if (!this.courseId) {\n        this.$message.error('Course ID is required')\n        return\n      }\n\n      this.$request.get('/course/selectById/' + this.courseId).then(res => {\n        if (res.code === '200') {\n          this.courseData = res.data\n        } else {\n          this.$message.error(res.msg || 'Failed to load course details')\n        }\n      }).catch(error => {\n        console.error('Failed to load course:', error)\n        this.$message.error('Failed to load course details')\n      })\n    },\n\n    // 购买课程\n    buy() {\n      // 检查用户是否已登录\n      if (!this.user.id) {\n        this.$message.warning('Please login first')\n        return\n      }\n\n      // 验证课程数据\n      if (!this.courseData.price) {\n        this.$message.error('Course price not available')\n        return\n      }\n\n      const data = {\n        courseId: this.courseId,\n        userId: this.user.id,\n        price: this.courseData.price\n      }\n\n      this.$request.post('/orders/add', data).then(res => {\n        if (res.code === '200') {\n          this.$message.success('Enrollment successful!')\n        } else {\n          this.$message.error(res.msg || 'Enrollment failed')\n        }\n      }).catch(error => {\n        console.error('Enrollment failed:', error)\n        this.$message.error('Enrollment failed, please try again')\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.main-content {\n  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n  min-height: 100vh;\n  padding: 40px 0;\n}\n\n.container {\n  width: 80%;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n/* Course Header */\n.course-header {\n  background: white;\n  border-radius: 20px;\n  padding: 40px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  margin-bottom: 30px;\n}\n\n.image-container {\n  position: relative;\n  border-radius: 15px;\n  overflow: hidden;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n}\n\n.course-image {\n  width: 100%;\n  height: 280px;\n  object-fit: cover;\n  border-radius: 15px;\n  transition: transform 0.3s ease;\n}\n\n.course-image:hover {\n  transform: scale(1.05);\n}\n\n.image-badge {\n  position: absolute;\n  top: 15px;\n  right: 15px;\n  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);\n  color: #8b5a00;\n  padding: 8px 12px;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);\n}\n\n.course-info {\n  padding-left: 20px;\n}\n\n.course-title {\n  font-size: 32px;\n  font-weight: 700;\n  color: #2d3748;\n  margin: 0 0 30px 0;\n  line-height: 1.3;\n  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.info-grid {\n  display: grid;\n  gap: 25px;\n  margin-bottom: 40px;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  background: #f8f9fc;\n  border-radius: 15px;\n  border-left: 4px solid #6366f1;\n  transition: all 0.3s ease;\n}\n\n.info-item:hover {\n  background: #f1f3ff;\n  transform: translateX(5px);\n}\n\n.price-item {\n  border-left-color: #10b981;\n}\n\n.price-item:hover {\n  background: #f0fdf4;\n}\n\n.info-label {\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  color: #4a5568;\n  min-width: 120px;\n  margin-right: 20px;\n}\n\n.info-label i {\n  margin-right: 8px;\n  font-size: 18px;\n  color: #6366f1;\n}\n\n.price-item .info-label i {\n  color: #10b981;\n}\n\n.info-value {\n  font-size: 16px;\n  color: #2d3748;\n  font-weight: 500;\n}\n\n.price-value {\n  font-size: 24px;\n  font-weight: 700;\n  color: #10b981;\n  text-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);\n}\n\n.action-section {\n  margin-top: 30px;\n}\n\n.buy-button {\n  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);\n  border: none;\n  height: 50px;\n  padding: 0 40px;\n  font-size: 16px;\n  font-weight: 600;\n  border-radius: 25px;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);\n}\n\n.buy-button:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);\n}\n\n.purchase-note {\n  margin-top: 15px;\n  display: flex;\n  align-items: center;\n  color: #718096;\n  font-size: 14px;\n}\n\n.purchase-note i {\n  margin-right: 8px;\n  color: #38a169;\n}\n\n/* Course Content Section */\n.course-content-section {\n  background: white;\n  border-radius: 20px;\n  padding: 40px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n}\n\n.section-header {\n  margin-bottom: 30px;\n  text-align: center;\n}\n\n.section-header h2 {\n  font-size: 28px;\n  font-weight: 700;\n  color: #2d3748;\n  margin: 0 0 15px 0;\n}\n\n.header-line {\n  width: 80px;\n  height: 4px;\n  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);\n  border-radius: 2px;\n  margin: 0 auto;\n}\n\n.content-wrapper {\n  background: #fafbfc;\n  border-radius: 15px;\n  padding: 30px;\n  border: 1px solid #e2e8f0;\n}\n\n.course-content {\n  line-height: 1.8;\n  font-size: 16px;\n  color: #4a5568;\n}\n\n/* Responsive Design */\n@media (max-width: 992px) {\n  .container {\n    width: 95%;\n  }\n\n  .course-header {\n    padding: 30px 20px;\n  }\n\n  .course-info {\n    padding-left: 0;\n    margin-top: 20px;\n  }\n\n  .course-title {\n    font-size: 28px;\n  }\n}\n\n@media (max-width: 768px) {\n  .main-content {\n    padding: 20px 0;\n  }\n\n  .course-header {\n    padding: 20px;\n  }\n\n  .course-title {\n    font-size: 24px;\n  }\n\n  .info-item {\n    flex-direction: column;\n    align-items: flex-start;\n    text-align: left;\n  }\n\n  .info-label {\n    margin-bottom: 8px;\n    margin-right: 0;\n  }\n\n  .buy-button {\n    width: 100%;\n  }\n\n  .course-content-section {\n    padding: 20px;\n  }\n\n  .content-wrapper {\n    padding: 20px;\n  }\n}\n</style>\n\n<style>\n/* Global styles for rich text content */\n.course-content p {\n  color: #4a5568 !important;\n  margin-bottom: 16px;\n  line-height: 1.8;\n}\n\n.course-content h1,\n.course-content h2,\n.course-content h3,\n.course-content h4,\n.course-content h5,\n.course-content h6 {\n  color: #2d3748 !important;\n  font-weight: 600;\n  margin: 24px 0 16px 0;\n}\n\n.course-content ul,\n.course-content ol {\n  margin: 16px 0;\n  padding-left: 30px;\n}\n\n.course-content li {\n  margin-bottom: 8px;\n  color: #4a5568;\n}\n\n.course-content img {\n  max-width: 100%;\n  height: auto;\n  border-radius: 8px;\n  margin: 16px 0;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.course-content blockquote {\n  border-left: 4px solid #6366f1;\n  background: #f8f9fc;\n  padding: 16px 20px;\n  margin: 20px 0;\n  border-radius: 0 8px 8px 0;\n}\n\n.course-content code {\n  background: #f1f3f4;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-family: 'Courier New', monospace;\n  color: #e53e3e;\n}\n\n.course-content pre {\n  background: #2d3748;\n  color: #e2e8f0;\n  padding: 20px;\n  border-radius: 8px;\n  overflow-x: auto;\n  margin: 16px 0;\n}\n</style>"],"mappings":"AAkFA,OAAAA,CAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,QAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAC,EAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA;IACA,KAAAC,gBAAA;EACA;EACAC,OAAA;IACA;IACAF,SAAA;MACA;QACA,MAAAG,OAAA,GAAAC,YAAA,CAAAC,OAAA;QACA,KAAAZ,IAAA,GAAAU,OAAA,GAAAG,IAAA,CAAAC,KAAA,CAAAJ,OAAA;MACA,SAAAK,KAAA;QACAC,OAAA,CAAAD,KAAA,+BAAAA,KAAA;QACA,KAAAf,IAAA;MACA;IACA;IAEA;IACAQ,iBAAA;MACA,UAAAP,QAAA;QACA,KAAAgB,QAAA,CAAAF,KAAA;QACA;MACA;MAEA,KAAAG,QAAA,CAAAC,GAAA,8BAAAlB,QAAA,EAAAmB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAjB,UAAA,GAAAgB,GAAA,CAAAtB,IAAA;QACA;UACA,KAAAkB,QAAA,CAAAF,KAAA,CAAAM,GAAA,CAAAE,GAAA;QACA;MACA,GAAAC,KAAA,CAAAT,KAAA;QACAC,OAAA,CAAAD,KAAA,2BAAAA,KAAA;QACA,KAAAE,QAAA,CAAAF,KAAA;MACA;IACA;IAEA;IACAU,IAAA;MACA;MACA,UAAAzB,IAAA,CAAAI,EAAA;QACA,KAAAa,QAAA,CAAAS,OAAA;QACA;MACA;;MAEA;MACA,UAAArB,UAAA,CAAAsB,KAAA;QACA,KAAAV,QAAA,CAAAF,KAAA;QACA;MACA;MAEA,MAAAhB,IAAA;QACAE,QAAA,OAAAA,QAAA;QACA2B,MAAA,OAAA5B,IAAA,CAAAI,EAAA;QACAuB,KAAA,OAAAtB,UAAA,CAAAsB;MACA;MAEA,KAAAT,QAAA,CAAAW,IAAA,gBAAA9B,IAAA,EAAAqB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAL,QAAA,CAAAa,OAAA;QACA;UACA,KAAAb,QAAA,CAAAF,KAAA,CAAAM,GAAA,CAAAE,GAAA;QACA;MACA,GAAAC,KAAA,CAAAT,KAAA;QACAC,OAAA,CAAAD,KAAA,uBAAAA,KAAA;QACA,KAAAE,QAAA,CAAAF,KAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}